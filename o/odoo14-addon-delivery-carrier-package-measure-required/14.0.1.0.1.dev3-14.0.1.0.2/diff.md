# Comparing `tmp/odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3-py3-none-any.whl.zip` & `tmp/odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,24 @@
-Zip file size: 27665 bytes, number of entries: 22
--rw-r--r--  2.0 unx     3229 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/README.rst
--rw-r--r--  2.0 unx       42 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/__init__.py
--rw-r--r--  2.0 unx      639 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/__manifest__.py
--rw-r--r--  2.0 unx     7304 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/i18n/delivery_carrier_package_measure_required.pot
--rw-r--r--  2.0 unx       94 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/models/__init__.py
--rw-r--r--  2.0 unx      490 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/models/product_packaging.py
--rw-r--r--  2.0 unx      670 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/models/stock_picking.py
--rw-r--r--  2.0 unx     1807 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/models/stock_quant_package.py
--rw-r--r--  2.0 unx       51 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      435 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     9455 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/static/description/icon.png
--rw-r--r--  2.0 unx    12384 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/static/description/index.html
--rw-r--r--  2.0 unx       60 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/tests/__init__.py
--rw-r--r--  2.0 unx     3903 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/tests/test_delivery_carrier_package_measure_require.py
--rw-r--r--  2.0 unx      975 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/views/product_packaging.xml
--rw-r--r--  2.0 unx       38 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/wizard/__init__.py
--rw-r--r--  2.0 unx     1207 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.py
--rw-r--r--  2.0 unx     2455 b- defN 22-Nov-03 14:21 odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.xml
--rw-r--r--  2.0 unx     3931 b- defN 22-Nov-03 14:21 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Nov-03 14:21 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Nov-03 14:21 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2976 b- defN 22-Nov-03 14:21 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/RECORD
-22 files, 52242 bytes uncompressed, 22381 bytes compressed:  57.2%
+Zip file size: 27818 bytes, number of entries: 22
+-rw-r--r--  2.0 unx     3229 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/README.rst
+-rw-r--r--  2.0 unx       42 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/__init__.py
+-rw-r--r--  2.0 unx      639 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/__manifest__.py
+-rw-r--r--  2.0 unx     7304 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/i18n/delivery_carrier_package_measure_required.pot
+-rw-r--r--  2.0 unx       94 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/models/__init__.py
+-rw-r--r--  2.0 unx      490 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/models/product_packaging.py
+-rw-r--r--  2.0 unx      670 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/models/stock_picking.py
+-rw-r--r--  2.0 unx     2111 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/models/stock_quant_package.py
+-rw-r--r--  2.0 unx       51 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      435 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/static/description/icon.png
+-rw-r--r--  2.0 unx    12384 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/static/description/index.html
+-rw-r--r--  2.0 unx       60 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/tests/__init__.py
+-rw-r--r--  2.0 unx     4437 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/tests/test_delivery_carrier_package_measure_require.py
+-rw-r--r--  2.0 unx      975 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/views/product_packaging.xml
+-rw-r--r--  2.0 unx       38 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/wizard/__init__.py
+-rw-r--r--  2.0 unx     1207 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.py
+-rw-r--r--  2.0 unx     2455 b- defN 23-Jul-10 07:13 odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.xml
+-rw-r--r--  2.0 unx     3926 b- defN 23-Jul-10 07:13 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-10 07:13 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-10 07:13 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2956 b- defN 23-Jul-10 07:13 odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/RECORD
+22 files, 53055 bytes uncompressed, 22574 bytes compressed:  57.5%
```

## zipnote {}

```diff
@@ -48,20 +48,20 @@
 
 Filename: odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.py
 Comment: 
 
 Filename: odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.xml
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/METADATA
+Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/WHEEL
+Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/top_level.txt
+Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/RECORD
+Filename: odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/delivery_carrier_package_measure_required/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 {
     "name": "Delivery Carrier Package Measure Required",
     "summary": """
     Allow the configuration of which package measurements are required
     on a delivery carrier basis.
     """,
-    "version": "14.0.1.0.0",
+    "version": "14.0.1.0.2",
     "license": "AGPL-3",
     "author": "Camptocamp, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/delivery-carrier",
     "depends": [
         "stock",
         "delivery",
         # OCA/stock-logistics-workflow
```

## odoo/addons/delivery_carrier_package_measure_required/models/stock_quant_package.py

```diff
@@ -9,19 +9,25 @@
     _inherit = "stock.quant.package"
 
     length_required = fields.Boolean(related="packaging_id.package_length_required")
     width_required = fields.Boolean(related="packaging_id.package_width_required")
     height_required = fields.Boolean(related="packaging_id.package_height_required")
     weight_required = fields.Boolean(related="packaging_id.package_weight_required")
 
-    @api.constrains("length", "width", "height", "weight")
     # The boolean field use to check if a dimension is required are intentionally left out.
     # To not raise error when changing packaging configuration.
+    @api.constrains("pack_length", "width", "height", "shipping_weight", "quant_ids")
     def _check_required_dimension(self):
+        ignore_pack_content = self.env.context.get(
+            "delivery_pkg_measure__ignore_package_content"
+        )
         for package in self:
+            if not ignore_pack_content and not package.quant_ids:
+                # Only validate a package when it contains goods
+                continue
             required_dimension = []
             if package.length_required and not package.pack_length:
                 required_dimension.append(_("length"))
             if package.width_required and not package.width:
                 required_dimension.append(_("width"))
             if package.height_required and not package.height:
                 required_dimension.append(_("height"))
```

## odoo/addons/delivery_carrier_package_measure_required/tests/test_delivery_carrier_package_measure_require.py

```diff
@@ -45,51 +45,63 @@
                 "picking_id": cls.pick.id,
                 "qty_done": 5,
                 "location_id": cls.stock_location.id,
                 "location_dest_id": cls.customer_location.id,
             }
         )
         cls.pick.action_confirm()
-
-    def test_required_measurement_are_properly_set(self):
-        """Check required measurement are fullfilled on validation."""
-        pack_action = self.pick.action_put_in_pack()
+        pack_action = cls.pick.action_put_in_pack()
         pack_action_ctx = pack_action["context"]
         pack_wiz = (
-            self.env["choose.delivery.package"].with_context(pack_action_ctx).create({})
+            cls.env["choose.delivery.package"]
+            .with_context(**pack_action_ctx)
+            .create({})
         )
         pack_wiz.action_put_in_pack()
-        package = self.pick.move_line_ids.mapped("result_package_id")
-        package.packaging_id = self.packaging
+        cls.package = cls.pick.move_line_ids.mapped("result_package_id")
+        cls.package.packaging_id = cls.packaging
+
+    def test_force_check_required_measurement(self):
+        self.packaging.package_length_required = True
+        # Picking is not done no validation error
+        self.pick._check_required_package_measurement()
+        # Force validation error raised
+        pick = self.pick.with_context(delivery_pkg_measure__ignore_package_content=True)
+        with self.assertRaises(ValidationError):
+            pick.button_validate()
+
+    def test_required_measurement_are_properly_set(self):
+        """Check required measurement are fullfilled on done picking."""
+        self.pick._action_done()
         # No measurement required
         self.pick._check_required_package_measurement()
         # Check length is required
         self.packaging.package_length_required = True
         with self.assertRaises(ValidationError):
             self.pick.button_validate()
-        package.pack_length = 55
+        self.package.pack_length = 55
         self.pick._check_required_package_measurement()
         # Check width is required
         self.packaging.package_width_required = True
         with self.assertRaises(ValidationError):
             self.pick._check_required_package_measurement()
-        package.width = 25
+        self.package.width = 25
         self.pick._check_required_package_measurement()
         # Check weight is required
+        self.package.shipping_weight = False
         self.packaging.package_weight_required = True
-        package.shipping_weight = False
         with self.assertRaises(ValidationError):
             self.pick._check_required_package_measurement()
-        package.shipping_weight = 250
+        self.package.shipping_weight = 250
         self.pick._check_required_package_measurement()
         # Check height is required
         self.packaging.package_height_required = True
         with self.assertRaises(ValidationError):
             self.pick._check_required_package_measurement()
-        package.height = 250
+        self.package.height = 250
         self.pick._check_required_package_measurement()
         # Missing requirement on validate
-        package.width_required = False
-        package.width = False
-        package.width_required = True
+        self.package.width_required = False
+        self.package.width = False
+        self.package.width_required = True
         with self.assertRaises(ValidationError):
             self.pick.button_validate()
```

## Comparing `odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/METADATA` & `odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-delivery-carrier-package-measure-required
-Version: 14.0.1.0.1.dev3
+Version: 14.0.1.0.2
 Summary: Allow the configuration of which package measurements are required on a delivery carrier basis.
 Home-page: https://github.com/OCA/delivery-carrier
 Author: Camptocamp, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/RECORD` & `odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 odoo/addons/delivery_carrier_package_measure_required/README.rst,sha256=W8MR7p3pBCW4VX8oh_ZlUT7SJbBHOvUZoVbRwoBlmWU,3229
 odoo/addons/delivery_carrier_package_measure_required/__init__.py,sha256=R3l5zcM1DHY7iqr3kt92069kmImpPafRbNSzv6p_hBE,42
-odoo/addons/delivery_carrier_package_measure_required/__manifest__.py,sha256=fhsYV3kYwZ3PGk4-iF2jRbDhDxVqNEb8NobJT-OxKLA,639
+odoo/addons/delivery_carrier_package_measure_required/__manifest__.py,sha256=J3AtAbSqh6mTQEw5TDAqMejrBenIt8-YFjE_Ht8yogg,639
 odoo/addons/delivery_carrier_package_measure_required/i18n/delivery_carrier_package_measure_required.pot,sha256=jra79kahGIdhm28GRT9J2LJLH4dwjbv3RLUC_tHewdk,7304
 odoo/addons/delivery_carrier_package_measure_required/models/__init__.py,sha256=2PplB62HRXnJDjrv5xccpDPUjdDmDhqs58ljDgcbyn4,94
 odoo/addons/delivery_carrier_package_measure_required/models/product_packaging.py,sha256=w5tLEja9rRWw5dngzjQojD35pQB6GxLQOYU12_2oAKY,490
 odoo/addons/delivery_carrier_package_measure_required/models/stock_picking.py,sha256=u8x3H5DixY4IT52im44yQokXNN9ZUmJeJpR3zlUoC0c,670
-odoo/addons/delivery_carrier_package_measure_required/models/stock_quant_package.py,sha256=QZbhRhwVnkf7EtXAsAvietY-cxk9dLliec4kku9Anl8,1807
+odoo/addons/delivery_carrier_package_measure_required/models/stock_quant_package.py,sha256=_ERO3xXWrO-pfrDyBxp0lKxn5Q_1XmlkqnmI4I-Zq7s,2111
 odoo/addons/delivery_carrier_package_measure_required/readme/CONTRIBUTORS.rst,sha256=uAPcwg62NVS4AhHWOH1ylKl_Fyk39Tz7bGv0X4PC5Xs,51
 odoo/addons/delivery_carrier_package_measure_required/readme/DESCRIPTION.rst,sha256=WHNF33PzqU0QllV8B2UW-dYm3OEHt70WViyebeGqyUc,435
 odoo/addons/delivery_carrier_package_measure_required/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/delivery_carrier_package_measure_required/static/description/index.html,sha256=QtB5l03gzpK7ARLgDtZD8tfYoVQaDSmYzbk-sh89J2o,12384
 odoo/addons/delivery_carrier_package_measure_required/tests/__init__.py,sha256=tqXdsKpredfIksc3E4Aty50ZOENoDOk6dd-ehY4ynFY,60
-odoo/addons/delivery_carrier_package_measure_required/tests/test_delivery_carrier_package_measure_require.py,sha256=4gGyu4tKa-_vZe2BU0AlHsJj444pCnb52Wfl2_B5-I8,3903
+odoo/addons/delivery_carrier_package_measure_required/tests/test_delivery_carrier_package_measure_require.py,sha256=rUYdWGLldHISjqiN9XWJYQDBm5AOE_jV5Kted9INXtA,4437
 odoo/addons/delivery_carrier_package_measure_required/views/product_packaging.xml,sha256=At-rHhOE6xE7Gl61y1SoOHLUDqIS4NrkmbvxzlrxDnA,975
 odoo/addons/delivery_carrier_package_measure_required/wizard/__init__.py,sha256=frZwOyIWW4qsEEpWpZ7oX1aGDMBz7b-KB6EwlvE7DDk,38
 odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.py,sha256=qmcOZ0RoPPSsIiuPVGIJf2ccs05OBNtjivpjdaMq3mA,1207
 odoo/addons/delivery_carrier_package_measure_required/wizard/choose_delivery_package.xml,sha256=i8sypdsSDLZrkfy_nVnFy_aQkohbUvqH8eHMdtcQB68,2455
-odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/METADATA,sha256=3lqRePdpjJ33_7EDxbJTDSLMlCXK6q3EokhnhvjDdpk,3931
-odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.1.dev3.dist-info/RECORD,,
+odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/METADATA,sha256=_o91w4TSzJX9RnPQHFxaadBNgK2GG0YVl9J-tpDV-j0,3926
+odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_delivery_carrier_package_measure_required-14.0.1.0.2.dist-info/RECORD,,
```

